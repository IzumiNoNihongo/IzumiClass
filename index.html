<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanji Game</title>
    <style>
/* Styling umum */
/* Styling umum */
body {
    font-family: 'Arial', sans-serif;
    background-color: #e3f2fd; /* Warna biru muda */
    text-align: center;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Container utama (box tengah) */
.container {
    background: white;
    width: 350px;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease-in-out;
}


/* Judul */
h2 {
    font-size: 22px;
    margin-bottom: 10px;
    color: #333;
}

/* Kanji besar */
#kanji {
    font-size: 60px;
    color: red;
}

/* Input bacaan & arti */
input {
    width: 90%;
    padding: 10px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
    text-align: center;
}

/* Tombol cek jawaban */
button {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    width: 95%;
    margin-top: 10px;
    transition: 0.3s;
}

/* Efek hover tombol */
button:hover {
    background-color: #0056b3;
}

/* Skor & Timer */
p {
    font-size: 16px;
    margin: 5px 0;
}

#score {
    font-weight: bold;
    color: #ff9800;
}

#timer {
    font-weight: bold;
    color: #28a745;
}

/* Meaning (arti kanji) */
#meaning {
    font-size: 18px;
    font-weight: bold;
    color: #555;
    opacity: 0;  /* 0 = tidak terlihat */
    transition: opacity 0.5s ease-in-out;
}

#meaning:hover {
    opacity: 1;  /* Muncul saat hover */
}

/* Hasil jawaban */
.correct {
    color: green;
    font-weight: bold;
}

.wrong {
    color: red;
    font-weight: bold;
}

/* Responsif untuk layar kecil */
@media (max-width: 400px) {
    .container {
        width: 90%;
        padding: 15px;
    }

    #kanji {
        font-size: 50px;
    }
}

/* --- CSS untuk Tampilan Hasil Jawaban --- */

/* Box jawaban */
.feedback-list {
    max-height: 250px; /* Batasi tinggi maksimal */
    overflow-y: auto; /* Aktifkan scroll jika melebihi batas */
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 5px;
    background: #f9f9f9;
    margin-top: 10px;
}

/* Warna jawaban benar & salah */
.correct-box {
    background: #d4edda;
    border-left: 5px solid green;
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
}

.wrong-box {
    background: #f8d7da;
    border-left: 5px solid red;
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
}

/* Gaya teks dalam hasil jawaban */
.feedback-item {
    padding: 5px;
    border-bottom: 1px solid #ddd;
}

.feedback-item:last-child {
    border-bottom: none;
}

/* Tombol untuk melihat semua jawaban */
#showAllBtn {
    background-color: #007bff;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    margin-top: 10px;
}

#showAllBtn:hover {
    background-color: #0056b3;
}

/* Efek animasi muncul hasil */
#feedback {
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
}

#feedback.show {
    opacity: 1;
}

    </style>
</head>
<body>
    <div class="container">
        <h2>Kanji Game</h2>
        <div id="questions">
       
        
        <div class="kanji" id="kanji">ÂÆå‰∫Ü</div>
        <p id="meaning">Selesai</p>
        <input type="text" id="reading" placeholder="Masukkan bacaan (hiragana/katakana)">
        <input type="text" id="meaningInput" placeholder="Masukkan arti dalam bahasa Indonesia">
        <button onclick="checkAnswer()">Cek Jawaban</button>
        <p id="feedback"></p>
        <div class="scoreboard">
            <p>üèÜ Skor: <span id="score">0</span></p>
            <p>‚è≥ Waktu: <span id="timer">30</span> detik</p>
        </div>
    </div>
        </div>
    <script>

const kanjiList = [
{ kanji: "ÂÆå‰∫Ü", reading: "„Åã„Çì„Çä„Çá„ÅÜ", meanings: ["Selesai", "Berakhir"] },
{ kanji: "ÁµÇ„Çè„Å£„Åü", reading: "„Åä„Çè„Å£„Åü", meanings: ["Selesai", "Tamat"] },
{ kanji: "ÁµÇ‰∫Ü", reading: "„Åó„ÇÖ„ÅÜ„Çä„Çá„ÅÜ", meanings: ["Selesai", "Penghentian"] },
{ kanji: "Â§©Êâç", reading: "„Å¶„Çì„Åï„ÅÑ", meanings: ["Jenius", "Berbakat"] },
{ kanji: "‰∏é„Åà„Çã", reading: "„ÅÇ„Åü„Åà„Çã", meanings: ["Memberi", "Menyediakan"] },
{ kanji: "‰∫°„Åè„Åô", reading: "„Å™„Åè„Åô", meanings: ["Kehilangan", "Kehilangan seseorang"] },
{ kanji: "„Åä‰∫í„ÅÑ", reading: "„Åä„Åü„Åå„ÅÑ", meanings: ["Saling", "Satu sama lain"] },
{ kanji: "Ëá™Áî±", reading: "„Åò„ÇÜ„ÅÜ", meanings: ["bebas", "Kemerdekaan"] },
{ kanji: "‰ªªÂãô", reading: "„Å´„Çì„ÇÄ", meanings: ["Tugas", "Misi","kewajiban"] },
{ kanji: "‰∫§„Åò„Çã", reading: "„Åæ„Åò„Çã", meanings: ["mencampur", "Menyatu"] },
{ kanji: "‰∫§ÈÄö", reading: "„Åì„ÅÜ„Å§„ÅÜ", meanings: ["Lalu lintas",] },
{ kanji: "‰º∫", reading: "„ÅÜ„Åã„Åå", meanings: ["Mengunjungi", "Menanyakan"] },
{ kanji: "Ê±∫ÊÑè", reading: "„Åë„Å§„ÅÑ", meanings: ["Tekad", "Keputusan"] },
{ kanji: "Âê¶ÂÆö", reading: "„Å≤„Å¶„ÅÑ", meanings: ["Penolakan", "Penyangkalan"] },
{ kanji: "„ÅÇ„Å∞„Çå„Çã", reading: "„ÅÇ„Å∞„Çå„Çã", meanings: ["Mengamuk", "Menggila"] },
{ kanji: "Á©∫(„ÅÇ)„ÅÑ„Å¶„Çã", reading: "„ÅÇ„ÅÑ„Å¶„Çã", meanings: ["Kosong", "ada waktu"] },
{ kanji: "Ê±ó„Åè„Åï„ÅÑ", reading: "„ÅÇ„Åõ„Åè„Åï„ÅÑ", meanings: ["Bau keringat", "Bau tidak sedap"] },
{ kanji: "‰ª£Èáë", reading: "„Å†„ÅÑ„Åç„Çì", meanings: ["Harga", "Biaya"] },
{ kanji: "Âá∫Êù•‰∏ä(„Åå„Çä)", reading: "„Åß„Åç„ÅÇ„Åå„Çä", meanings: ["penyelesaian"] },
{ kanji: "Âá∫Êù•‰∫ã", reading: "„Åß„Åç„Åî„Å®", meanings: ["Peristiwa", "Kejadian"] },
{ kanji: "ÂêåÊôÇ„Å´", reading: "„Å©„ÅÜ„Åò„Å´", meanings: ["Pada saat yang sama", "Bersamaan"] },
{ kanji: "ÊøÄ„Åó„ÅÑ", reading: "„ÅØ„Åí„Åó„ÅÑ", meanings: ["Intens", "cepat",]},
{ kanji: "Ê∏¨„Çã", reading: "„ÅØ„Åã„Çã", meanings: ["Mengukur", "Menimbang"] },
{ kanji: "„Éè„É≥„Éâ„É´", reading: "„Éè„É≥„Éâ„É´", meanings: ["Setir", "Pegangan"] },
{ kanji: "ÁäØ‰∫∫", reading: "„ÅØ„Çì„Å´„Çì", meanings: ["Pelaku", "Tersangka"] },
{ kanji: "‰Ωç", reading: "„Åè„Çâ„ÅÑ", meanings: ["Peringkat"] },
{ kanji: "„Ç§„É°„Éº„Ç∏", reading: "„Ç§„É°„Éº„Ç∏", meanings: ["Citra"] },
{ kanji: "Âç∞Ë±°", reading: "„ÅÑ„Çì„Åó„Çá„ÅÜ", meanings: ["Kesan"] },
{ kanji: "ÂåªÁôÇ", reading: "„ÅÑ„Çä„Çá„ÅÜ", meanings: [ "Pengobatan"] },
{ kanji: "ÂåªÁôÇË≤ª", reading: "„ÅÑ„Çä„Çá„ÅÜ„Å≤", meanings: ["Biaya medis",] },
{ kanji: "ÁÇí„ÇÅ„Çã", reading: "„ÅÑ„Åü„ÇÅ„Çã", meanings: ["Menumis", ] },
{ kanji: "Ê≠£Âºè", reading: "„Åõ„ÅÑ„Åó„Åç", meanings: ["Resmi"] },
{ kanji: "„ÅÑ„Åü„Åö„Çâ", reading: "„ÅÑ„Åü„Åö„Çâ", meanings: ["Usil"] },
{ kanji: "‰∫ãÂâç", reading: "„Åò„Åú„Çì", meanings: ["Sebelumnya", "Di muka"] },
{ kanji: "Á¥îÁ≤ã", reading: "„Åò„ÇÖ„Çì„Åô„ÅÑ", meanings: ["Murni"] },
{ kanji: "ÈáçË¶Å", reading: "„Åò„ÇÖ„ÅÜ„Çà„ÅÜ", meanings: ["Penting",] },
{ kanji: "Ë©±È°å", reading: "„Çè„Å†„ÅÑ", meanings: ["Topik pembicaraan", "topik"] }

];
let currentIndex = 0;
let score = 0;
let correctCount = 0;
let wrongCount = 0;
let timeLeft = 30;
let timer;
let userAnswers = [];

// Memulai timer saat permainan dimulai
function startTimer() {
    clearInterval(timer);
    timeLeft = 30;
    document.getElementById("timer").textContent = `${timeLeft} detik`;

    timer = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = `${timeLeft} detik`;

        if (timeLeft <= 0) {
            clearInterval(timer);
            checkAnswer(true); // Cek jawaban otomatis jika waktu habis
        }
    }, 1000);
}

// Mengecek jawaban yang dimasukkan oleh pengguna
function checkAnswer(timeUp = false) {
    const readingInput = document.getElementById("reading").value.trim();
    const meaningInput = document.getElementById("meaningInput").value.trim().toLowerCase();
    const currentKanji = kanjiList[currentIndex];

    let correct = (readingInput === currentKanji.reading &&
                   currentKanji.meanings.some(m => fuzzyMatch(m.toLowerCase(), meaningInput)));

    let feedbackText = correct ? "‚úÖ Benar" : `‚ùå Salah! Jawaban: ${currentKanji.meanings.join(", ")}`;
    let feedbackClass = correct ? "correct" : "wrong";

    // Simpan jawaban ke dalam array untuk ditampilkan di akhir permainan
    userAnswers.push({
        kanji: currentKanji.kanji,
        userReading: readingInput,
        correctReading: currentKanji.reading,
        userMeaning: meaningInput,
        correctMeaning: currentKanji.meanings.join(", "),
        status: correct ? "‚úÖ" : "‚ùå"
    });

    // Tampilkan feedback langsung di bawah soal
    let feedbackDiv = document.getElementById("feedback");
feedbackDiv.innerHTML = `<span class="${feedbackClass}">${feedbackText}</span>`;

    if (correct) {
        score++;
        correctCount++;
    } else {
        wrongCount++;
    }

    document.getElementById("score").textContent = score;

    setTimeout(() => {
        nextKanji();
    }, 1000);
}

// Fungsi untuk berpindah ke soal berikutnya
function nextKanji() {
    if (currentIndex + 1 < kanjiList.length) {
        currentIndex++;
        const nextKanji = kanjiList[currentIndex];

        document.getElementById("kanji").textContent = nextKanji.kanji;
        document.getElementById("meaning").style.visibility = "hidden";
        document.getElementById("reading").value = "";
        document.getElementById("meaningInput").value = "";
        document.getElementById("feedback").textContent = ""; // Hapus feedback sebelumnya

        // Restart timer
        clearInterval(timer);
        timeLeft = 30;
        document.getElementById("timer").textContent = `${timeLeft} detik`;
        startTimer();
    } else {
        endGame();
    }
}

function endGame() {
    clearInterval(timer);

    let resultHTML = `<h2>Game Selesai üéâ</h2>
        <p>Benar: ${correctCount}</p>
        <p>Salah: ${wrongCount}</p>
        <p>Skor Akhir: ${score}</p>
        <h3>Jawaban Kamu:</h3>
        <div class="feedback-list" id="feedbackList">`;

    // Ambil hanya 10 jawaban pertama untuk ditampilkan awalnya
    let maxVisible = 10;
    userAnswers.forEach((item, index) => {
        let hiddenClass = index >= maxVisible ? "hidden-answer" : "";
        resultHTML += `
        <div class="feedback-item ${hiddenClass}">
            <p><strong>${index + 1}. ${item.kanji}</strong></p>
            <p>Jawaban Kamu: ${item.userReading} - ${item.userMeaning}</p>
            <p>Jawaban Benar: ${item.correctReading} - ${item.correctMeaning}</p>
            <p>Status: ${item.status}</p>
        </div>`;
    });

    resultHTML += `</div>`;

    // Tambahkan tombol untuk melihat semua jawaban jika jumlahnya lebih dari 10
    if (userAnswers.length > maxVisible) {
        resultHTML += `<button id="showAllBtn">Lihat Semua Jawaban</button>`;
    }

    document.querySelector(".container").innerHTML = resultHTML;

    // Tambahkan event listener untuk tombol
    let showAllBtn = document.getElementById("showAllBtn");
    if (showAllBtn) {
        showAllBtn.addEventListener("click", () => {
            document.querySelectorAll(".hidden-answer").forEach(item => {
                item.classList.remove("hidden-answer");
            });
            showAllBtn.style.display = "none"; // Sembunyikan tombol setelah ditekan
        });
    }
}

// Fungsi fuzzy match untuk mencocokkan jawaban dengan toleransi kesalahan kecil
function fuzzyMatch(expected, input) {
    return expected.includes(input) || similarity(expected, input) > 0.8;
}

// Fungsi untuk menghitung tingkat kemiripan antara dua string
function similarity(s1, s2) {
    let longer = s1.length > s2.length ? s1 : s2;
    let shorter = s1.length > s2.length ? s2 : s1;
    let longerLength = longer.length;
    if (longerLength === 0) return 1.0;
    return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
}

// Algoritma edit distance untuk membandingkan dua string
function editDistance(s1, s2) {
    let costs = [];
    for (let i = 0; i <= s1.length; i++) {
        let lastValue = i;
        for (let j = 0; j <= s2.length; j++) {
            if (i === 0) costs[j] = j;
            else if (j > 0) {
                let newValue = costs[j - 1];
                if (s1.charAt(i - 1) !== s2.charAt(j - 1)) {
                    newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                }
                costs[j - 1] = lastValue;
                lastValue = newValue;
            }
        }
        if (i > 0) costs[s2.length] = lastValue;
    }
    return costs[s2.length];
}

// Memulai permainan pertama kali
startTimer();

    </script>
</body>
</html>
